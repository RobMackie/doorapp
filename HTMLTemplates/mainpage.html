<html>
	<head>
		<link rel="stylesheet" type="text/css" href="static/style.css"/>
	    <title>Door App</title>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
	</head>
<body>
<CENTER>
<h1>Welcome to TFD Headquarters!</h1>
<H3 style="color:red;">${error}</H3>
<form>
    <input id="user_id" type="text" name="username" placeholder="Login Name" style="border:1px solid #333333; padding: 2px; margin:4px;"/><br/>
	<input id="pass_id" type="password" name="password"  placeholder="Password" style="border:1px solid #333333; padding: 2px; margin:4px;"/><br/>
    <input type="button" value="Unlock" onclick="unlock()"/>
</form>
</CENTER>
</body>
</html>
<script>
function unlock(){
xhr = new XMLHttpRequest();

xhr.open('POST', 'unlock', true);
xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
xhr.onload = function() {
    if (xhr.status === 200){
    	if(xhr.responseText != ''){
    		alert('Error: ' + xhr.responseText);	
    	}
		else{
			alert('Door should have unlocked');
		}
		document.getElementById("pass_id").value = '';  // clear password
    }    
    else{
        alert('Request failed.  Returned status of ' + xhr.status);
    }
};
sendString = encodeURI('username='+document.getElementById("user_id").value) + '&' +encodeURI('password='+document.getElementById("pass_id").value);
xhr.send(sendString);
}
</script>